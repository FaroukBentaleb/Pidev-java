<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.Circle?>
<?import de.jensd.fx.glyphs.fontawesome.*?>

<BorderPane prefHeight="1280.0" prefWidth="720.0" style="-fx-background-color: #f8fafc;" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="com.learniverse.controller.SubscriptionController">

    <!-- LEFT NAV BAR -->
    <left>
        <VBox alignment="TOP_CENTER" prefHeight="720.0" prefWidth="240.0" spacing="10" style="-fx-background-color: #1e293b;">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="25.0" />
            </padding>

            <!-- App Name/Logo -->
            <VBox alignment="CENTER" spacing="8" style="-fx-padding: 0 0 20 0;">
                <Label style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;" text="Learniverse" />
                <Label style="-fx-text-fill: #64748b; -fx-font-size: 15px;" text="Admin Panel" />
            </VBox>

            <!-- Navigation Buttons -->
            <Button alignment="BASELINE_LEFT" graphicTextGap="15" maxWidth="1.7976931348623157E308" prefHeight="45.0" styleClass="nav-button" style="-fx-background-color: transparent; -fx-text-fill: #94a3b8;">
                <graphic>
                    <FontAwesomeIconView glyphName="DASHBOARD" fill="#94a3b8" glyphSize="20"/>
                </graphic>
                <padding>
                    <Insets bottom="12.0" left="15.0" right="12.0" top="12.0" />
                </padding>
                <text>Dashboard</text>
            </Button>

            <Button alignment="BASELINE_LEFT" graphicTextGap="15" maxWidth="1.7976931348623157E308" prefHeight="45.0" styleClass="nav-button" style="-fx-background-color: transparent; -fx-text-fill: #94a3b8;" onAction="#handleOfferManagement">
                <graphic>
                    <FontAwesomeIconView glyphName="TAGS" fill="#94a3b8" glyphSize="20"/>
                </graphic>
                <padding>
                    <Insets bottom="12.0" left="15.0" right="12.0" top="12.0" />
                </padding>
                <text>Offer Management</text>
            </Button>

            <Button alignment="BASELINE_LEFT" graphicTextGap="15" maxWidth="1.7976931348623157E308" prefHeight="45.0" styleClass="nav-button-active" style="-fx-background-color: #334155; -fx-text-fill: white;">
                <graphic>
                    <FontAwesomeIconView glyphName="USERS" fill="white" glyphSize="20"/>
                </graphic>
                <padding>
                    <Insets bottom="12.0" left="15.0" right="12.0" top="12.0" />
                </padding>
                <text>Subscription Management</text>
            </Button>

            <!-- Profile at bottom -->
            <VBox VBox.vgrow="ALWAYS" />
            <HBox alignment="CENTER_LEFT" prefHeight="60.0" spacing="12" style="-fx-background-color: #334155; -fx-background-radius: 8;">
                <padding>
                    <Insets bottom="12.0" left="15.0" right="15.0" top="12.0" />
                </padding>
                <StackPane>
                    <Circle fill="#ff5722" radius="20" />
                    <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="A" />
                </StackPane>
                <VBox spacing="4">
                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="Admin" />
                    <Label style="-fx-text-fill: #94a3b8; -fx-font-size: 12px;" text="Administrator" />
                </VBox>
            </HBox>
        </VBox>
    </left>

    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll-pane">
            <VBox spacing="25" styleClass="main-content">
                <padding>
                    <Insets top="25" right="35" bottom="25" left="35"/>
                </padding>

                <!-- TOP BAR -->
                <HBox alignment="CENTER" prefHeight="80.0" styleClass="top-bar">
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1a237e;" text="Subscription Management" />
                    <HBox HBox.hgrow="ALWAYS" />
                    
                    <!-- Search Area -->
                    <HBox alignment="CENTER" prefHeight="45.0" prefWidth="380.0" styleClass="modern-search-box">
                        <FontAwesomeIconView glyphName="SEARCH" fill="#9e9e9e" glyphSize="19"/>
                        <TextField fx:id="searchField" prefHeight="45.0" promptText="Search subscriptions..." style="-fx-background-color: transparent;">
                            <HBox.margin>
                                <Insets left="10"/>
                            </HBox.margin>
                        </TextField>
                    </HBox>

                    <HBox alignment="CENTER" spacing="15">
                        <padding>
                            <Insets left="20"/>
                        </padding>
                        <Button fx:id="addButton" styleClass="add-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="PLUS" fill="white" glyphSize="19"/>
                            </graphic>
                            <text>New Subscription</text>
                        </Button>
                    </HBox>
                </HBox>

                <!-- Statistics Panel -->
                <HBox spacing="20" styleClass="stats-panel">
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="USERS" fill="#1a237e" glyphSize="32"/>
                        <Text text="Total Subscriptions" styleClass="stat-label"/>
                        <Text fx:id="totalSubscriptionsText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="CHECK_CIRCLE" fill="#1a237e" glyphSize="32"/>
                        <Text text="Active Subscriptions" styleClass="stat-label"/>
                        <Text fx:id="activeSubscriptionsText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="CALENDAR" fill="#1a237e" glyphSize="32"/>
                        <Text text="Avg. Duration (Days)" styleClass="stat-label"/>
                        <Text fx:id="avgDurationText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="GRADUATION_CAP" fill="#1a237e" glyphSize="32"/>
                        <Text text="Total Courses" styleClass="stat-label"/>
                        <Text fx:id="totalCoursesText" text="0" styleClass="stat-value"/>
                    </VBox>
                </HBox>

                <!-- Charts Section -->
                <HBox spacing="20" styleClass="charts-container">
                    <VBox styleClass="chart-card" HBox.hgrow="ALWAYS">
                        <Text text="Subscription Status Distribution" styleClass="chart-title"/>
                        <PieChart fx:id="statusDistributionChart" styleClass="mini-chart"/>
                    </VBox>
                    <VBox styleClass="chart-card" HBox.hgrow="ALWAYS">
                        <Text text="Subscription Trends" styleClass="chart-title"/>
                        <LineChart fx:id="subscriptionTrendsChart" styleClass="mini-chart">
                            <xAxis>
                                <CategoryAxis fx:id="subscriptionTrendsXAxis" label="Month"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="subscriptionTrendsYAxis" label="Subscriptions"/>
                            </yAxis>
                        </LineChart>
                    </VBox>
                </HBox>

                <!-- Filter Controls -->
                <HBox spacing="15" alignment="CENTER_LEFT" styleClass="filter-bar">
                    <ComboBox fx:id="filterStatus" promptText="Status" styleClass="filter-combo"/>
                    <ComboBox fx:id="sortBy" promptText="Sort by" styleClass="filter-combo"/>
                    <ComboBox fx:id="itemsPerPage" promptText="Show" styleClass="filter-combo"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="refreshButton" styleClass="refresh-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="REFRESH" fill="#1565c0" glyphSize="19"/>
                        </graphic>
                        <text>Refresh</text>
                    </Button>
                </HBox>

                <!-- Cards Container -->
                <FlowPane fx:id="cardsContainer" hgap="25" vgap="25" styleClass="cards-container">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                </FlowPane>

                <!-- Pagination -->
                <HBox alignment="CENTER" spacing="20" styleClass="pagination-container">
                    <Text fx:id="paginationInfo" styleClass="pagination-info"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <HBox alignment="CENTER" spacing="8" styleClass="pagination-controls">
                        <Button fx:id="prevPageButton" styleClass="pagination-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="CHEVRON_LEFT" fill="#1a237e" glyphSize="1.2"/>
                            </graphic>
                        </Button>
                        <TextField fx:id="jumpToPageField" promptText="Page" styleClass="page-input"/>
                        <Text text="/" styleClass="pagination-text"/>
                        <Text fx:id="totalPagesText" text="0" styleClass="pagination-text"/>
                        <Button fx:id="nextPageButton" styleClass="pagination-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="CHEVRON_RIGHT" fill="#1a237e" glyphSize="1.2"/>
                            </graphic>
                        </Button>
                    </HBox>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane> 