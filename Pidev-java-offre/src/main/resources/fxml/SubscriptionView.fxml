<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.Circle?>
<?import de.jensd.fx.glyphs.fontawesome.*?>

<BorderPane prefHeight="1280.0" prefWidth="720.0" styleClass="root-pane" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="tn.learniverse.controllers.SubscriptionController">
    <stylesheets>
        <URL>@../styles/styles.css</URL>
    </stylesheets>

    <!-- LEFT NAV BAR -->
    <left>
        <ScrollPane fitToWidth="true" styleClass="sidebar-scroll" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox styleClass="modern-sidebar" spacing="20">
                <!-- App Logo/Name -->
                <VBox styleClass="sidebar-header" alignment="CENTER" spacing="8">
                    <FontAwesomeIconView glyphName="GRADUATION_CAP" size="40" fill="WHITE"/>
                    <Text styleClass="sidebar-title" text="Learniverse"/>
                    <Text styleClass="nav-section-title" text="Admin Dashboard"/>
                </VBox>
                
                <!-- Navigation Section -->
                <VBox styleClass="nav-section" spacing="12">
                    <Text styleClass="nav-section-title" text="MAIN MENU"/>
                    
                    <Button styleClass="nav-button" mnemonicParsing="false">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="DASHBOARD" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Dashboard"/>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button fx:id="offersButton" styleClass="nav-button" mnemonicParsing="false" onAction="#handleOfferManagement">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="TAGS" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Offers"/>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button styleClass="nav-button, active" mnemonicParsing="false">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="USERS" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Subscriptions"/>
                            </HBox>
                        </graphic>
                    </Button>
                </VBox>
                
                <Separator styleClass="separator"/>
                
                <!-- Management Section -->
                <VBox styleClass="nav-section" spacing="12">
                    <Text styleClass="nav-section-title" text="MANAGEMENT"/>
                    
                    <Button styleClass="nav-button" mnemonicParsing="false">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="COGS" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Settings"/>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button styleClass="nav-button" mnemonicParsing="false">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="LINE_CHART" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Analytics"/>
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <Button styleClass="nav-button" mnemonicParsing="false">
                        <graphic>
                            <HBox spacing="18" alignment="CENTER_LEFT">
                                <FontAwesomeIconView glyphName="BELL" fill="WHITE" size="1.7em"/>
                                <Text fill="WHITE" text="Notifications"/>
                            </HBox>
                        </graphic>
                    </Button>
                </VBox>
                
                <Region VBox.vgrow="ALWAYS" minHeight="20"/>
                
                <!-- Profile Section -->
                <VBox styleClass="profile-section" spacing="15">
                    <HBox styleClass="modern-profile-section" alignment="CENTER_LEFT" spacing="15">
                        <StackPane styleClass="profile-avatar">
                            <Text styleClass="profile-initial" text="A"/>
                        </StackPane>
                        <VBox spacing="5">
                            <Text styleClass="profile-name" text="Admin"/>
                            <Text styleClass="profile-role" text="Administrator"/>
                        </VBox>
                    </HBox>
                </VBox>
            </VBox>
            <padding>
                <Insets bottom="20"/>
            </padding>
        </ScrollPane>
    </left>

    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll-pane">
            <VBox spacing="25" styleClass="main-content">
                <padding>
                    <Insets top="25" right="35" bottom="25" left="35"/>
                </padding>

                <!-- TOP BAR -->
                <HBox alignment="CENTER" prefHeight="80.0" styleClass="top-bar">
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1a237e;" text="Subscription Management" />
                    <HBox HBox.hgrow="ALWAYS" />
                    
                    <!-- Search Area -->
                    <HBox alignment="CENTER" prefHeight="45.0" prefWidth="380.0" styleClass="modern-search-box">
                        <FontAwesomeIconView glyphName="SEARCH" fill="#9e9e9e" glyphSize="19"/>
                        <TextField fx:id="searchField" prefHeight="45.0" promptText="Search subscriptions..." style="-fx-background-color: transparent;">
                            <HBox.margin>
                                <Insets left="10"/>
                            </HBox.margin>
                        </TextField>
                    </HBox>

                    <HBox alignment="CENTER" spacing="15">
                        <padding>
                            <Insets left="20"/>
                        </padding>
                        <Button fx:id="addButton" styleClass="add-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="PLUS" fill="white" glyphSize="19"/>
                            </graphic>
                            <text>New Subscription</text>
                        </Button>
                    </HBox>
                </HBox>

                <!-- Statistics Panel -->
                <HBox spacing="20" styleClass="stats-panel">
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="USERS" fill="#1a237e" glyphSize="32"/>
                        <Text text="Total Subscriptions" styleClass="stat-label"/>
                        <Text fx:id="totalSubscriptionsText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="CHECK_CIRCLE" fill="#1a237e" glyphSize="32"/>
                        <Text text="Active Subscriptions" styleClass="stat-label"/>
                        <Text fx:id="activeSubscriptionsText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="CALENDAR" fill="#1a237e" glyphSize="32"/>
                        <Text text="Avg. Duration (Days)" styleClass="stat-label"/>
                        <Text fx:id="avgDurationText" text="0" styleClass="stat-value"/>
                    </VBox>
                    <VBox styleClass="stat-card">
                        <FontAwesomeIconView glyphName="GRADUATION_CAP" fill="#1a237e" glyphSize="32"/>
                        <Text text="Total Courses" styleClass="stat-label"/>
                        <Text fx:id="totalCoursesText" text="0" styleClass="stat-value"/>
                    </VBox>
                </HBox>

                <!-- Charts Section -->
                <HBox spacing="20" styleClass="charts-container">
                    <VBox styleClass="chart-card" HBox.hgrow="ALWAYS">
                        <Text text="Subscription Status Distribution" styleClass="chart-title"/>
                        <PieChart fx:id="statusDistributionChart" styleClass="mini-chart"/>
                    </VBox>
                    <VBox styleClass="chart-card" HBox.hgrow="ALWAYS">
                        <Text text="Subscription Trends" styleClass="chart-title"/>
                        <LineChart fx:id="subscriptionTrendsChart" styleClass="mini-chart">
                            <xAxis>
                                <CategoryAxis fx:id="subscriptionTrendsXAxis" label="Month"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="subscriptionTrendsYAxis" label="Subscriptions"/>
                            </yAxis>
                        </LineChart>
                    </VBox>
                </HBox>

                <!-- Filter Controls -->
                <HBox spacing="15" alignment="CENTER_LEFT" styleClass="filter-bar">
                    <ComboBox fx:id="filterStatus" promptText="Status" styleClass="filter-combo"/>
                    <ComboBox fx:id="sortBy" promptText="Sort by" styleClass="filter-combo"/>
                    <ComboBox fx:id="itemsPerPage" promptText="Show" styleClass="filter-combo"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="refreshButton" styleClass="refresh-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="REFRESH" fill="#1565c0" glyphSize="19"/>
                        </graphic>
                        <text>Refresh</text>
                    </Button>
                </HBox>

                <!-- Cards Container -->
                <FlowPane fx:id="cardsContainer" hgap="25" vgap="25" styleClass="cards-container">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                </FlowPane>

                <!-- Pagination -->
                <HBox alignment="CENTER" spacing="20" styleClass="pagination-container">
                    <Text fx:id="paginationInfo" styleClass="pagination-info"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <HBox alignment="CENTER" spacing="8" styleClass="pagination-controls">
                        <Button fx:id="prevPageButton" styleClass="pagination-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="CHEVRON_LEFT" fill="#1a237e" glyphSize="1.2"/>
                            </graphic>
                        </Button>
                        <TextField fx:id="jumpToPageField" promptText="Page" styleClass="page-input"/>
                        <Text text="/" styleClass="pagination-text"/>
                        <Text fx:id="totalPagesText" text="0" styleClass="pagination-text"/>
                        <Button fx:id="nextPageButton" styleClass="pagination-button">
                            <graphic>
                                <FontAwesomeIconView glyphName="CHEVRON_RIGHT" fill="#1a237e" glyphSize="1.2"/>
                            </graphic>
                        </Button>
                    </HBox>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane> 